import{r as l,u as v,j as e,a as y,L as o,P as d,s as m,b as x}from"./index-CdvLYNcd.js";import{A as h}from"./activity-BWh0gMWM.js";import{R as n}from"./radio-Bgmuv_eZ.js";import{C as f,f as k}from"./format-BUbZ6fGC.js";import{S as p}from"./signal-DhaUUrwe.js";import{U as _}from"./users-APvXsCy8.js";import{C as L}from"./chevron-right-Bn83V2J9.js";function A(){const[g,u]=l.useState(!0),[b,j]=l.useState([]),i=v();if(l.useEffect(()=>{(async()=>{try{console.log("Nets: Fetching session...");const{data:{session:t}}=await m.auth.getSession();if(!t){console.log("Nets: No session, redirecting..."),i("/login");return}const w=t.user;console.log("Nets: Fetching nets...");const{data:a,error:c}=await m.from("nets").select("*, checkins(id)").eq("user_id",w.id).order("created_at",{ascending:!1});c?(console.error("Nets: Fetch error:",c),x.error("Failed to load nets")):(console.log(`Nets: Loaded ${(a==null?void 0:a.length)||0} nets`),j(a||[]))}catch(t){console.error("Nets: Critical error:",t),x.error("System synchronization error")}finally{u(!1)}})()},[i]),g)return e.jsx("div",{className:"flex items-center justify-center h-[80vh]",children:e.jsx(y,{className:"w-12 h-12 text-emerald-500 animate-spin"})});const r=b,N=s=>s.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase());return e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-10 mt-16 md:mt-20 pb-16 md:pb-20 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-mono mb-2",children:[e.jsx(h,{className:"w-3 h-3"}),"NET CONTROL LOGS"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white tracking-tight",children:"Operations Log"}),e.jsx("p",{className:"text-slate-400 mt-2 max-w-xl",children:"History of your net control sessions and exercises."})]}),e.jsxs(o,{to:"/nets/new",className:"btn btn-primary shadow-lg shadow-emerald-500/20 group",children:[e.jsx(d,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),e.jsx("span",{children:"Initialize Net"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"card glass-card p-5 flex flex-col items-center justify-center text-center group hover:bg-slate-800/80 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(n,{className:"w-5 h-5 text-slate-400"})}),e.jsx("p",{className:"text-3xl font-bold text-white font-mono",children:r.length}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-slate-500 font-bold mt-1",children:"Total Nets"})]}),e.jsxs("div",{className:"card glass-card p-5 flex flex-col items-center justify-center text-center group hover:bg-slate-800/80 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(h,{className:"w-5 h-5 text-emerald-400"})}),e.jsx("p",{className:"text-3xl font-bold text-emerald-400 font-mono",children:r.filter(s=>!s.ended_at).length}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-slate-500 font-bold mt-1",children:"Live Active"})]}),e.jsxs("div",{className:"card glass-card p-5 flex flex-col items-center justify-center text-center group hover:bg-slate-800/80 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/10 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(f,{className:"w-5 h-5 text-cyan-400"})}),e.jsx("p",{className:"text-3xl font-bold text-cyan-400 font-mono",children:r.filter(s=>s.type==="weekly").length}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-slate-500 font-bold mt-1",children:"Weekly"})]}),e.jsxs("div",{className:"card glass-card p-5 flex flex-col items-center justify-center text-center group hover:bg-slate-800/80 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-500/10 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(p,{className:"w-5 h-5 text-rose-400"})}),e.jsx("p",{className:"text-3xl font-bold text-rose-400 font-mono",children:r.filter(s=>s.type==="emergency_exercise").length}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-slate-500 font-bold mt-1",children:"Exercises"})]})]}),e.jsxs("div",{className:"card glass-card p-6 min-h-[400px]",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-5 bg-emerald-500 rounded-full"}),"All Operations"]}),r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center border-2 border-dashed border-slate-800 rounded-xl bg-slate-900/30",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-800 flex items-center justify-center mb-4",children:e.jsx(n,{className:"w-10 h-10 text-slate-600"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No operations logged"}),e.jsx("p",{className:"text-slate-500 mb-6 max-w-sm",children:"Start your first net control session to begin logging check-ins and tracking statistics."}),e.jsxs(o,{to:"/nets/new",className:"btn btn-primary shadow-lg shadow-emerald-500/20",children:[e.jsx(d,{className:"w-4 h-4"}),"Initialize First Net"]})]}):e.jsx("div",{className:"space-y-3",children:r.map(s=>{var t;return e.jsxs(o,{to:`/nets/${s.id}`,className:"group flex flex-col md:flex-row md:items-center p-4 rounded-xl bg-slate-900/50 border border-slate-800 hover:border-emerald-500/30 hover:bg-slate-800/80 transition-all hover:shadow-lg hover:shadow-emerald-500/5 relative overflow-hidden",children:[!s.ended_at&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-emerald-500 animate-pulse"}),e.jsxs("div",{className:"flex items-center gap-5 flex-1 pl-2",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 border border-t-white/10 ${s.ended_at?"bg-slate-800 border-slate-700":"bg-gradient-to-br from-emerald-500 to-cyan-500 shadow-lg shadow-emerald-500/20"}`,children:e.jsx(n,{className:`w-6 h-6 ${s.ended_at?"text-slate-500":"text-white"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white truncate group-hover:text-emerald-400 transition-colors",children:s.name}),!s.ended_at&&e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] uppercase font-bold tracking-wider bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 animate-pulse",children:"LIVE"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-1 text-xs text-slate-400 font-mono",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(f,{className:"w-3.5 h-3.5 text-slate-500"}),k(new Date(s.started_at),"MMM d, yyyy HH:mm")]}),s.frequency&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(p,{className:"w-3.5 h-3.5 text-slate-500"}),s.frequency]}),s.mode&&e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-slate-800 border border-slate-700 text-slate-300",children:s.mode})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 md:mt-0 pl-16 md:pl-0",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs font-bold uppercase tracking-wider ${s.type==="weekly"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":s.type==="emergency_exercise"?"bg-rose-500/10 text-rose-400 border border-rose-500/20":"bg-violet-500/10 text-violet-400 border border-violet-500/20"}`,children:N(s.type)}),e.jsxs("div",{className:"flex items-center justify-center min-w-[3rem] px-3 py-1.5 rounded-lg bg-slate-800/80 border border-slate-700 group-hover:border-emerald-500/20 transition-colors",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-slate-400 mr-2"}),e.jsx("span",{className:"text-sm font-mono font-bold text-white",children:((t=s.checkins)==null?void 0:t.length)||0})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-emerald-500 group-hover:text-white transition-all transform group-hover:translate-x-1",children:e.jsx(L,{className:"w-4 h-4"})})]})]},s.id)})})]})]})}export{A as default};
