import{c as R,r as t,u as D,j as e,a as M,b as l,s as i}from"./index-DUy7VNoi.js";import{R as m}from"./radio-u3xv3szh.js";import{S as A}from"./signal-BNucFogG.js";import{F as T}from"./file-text-Bj7x8DFu.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=R("Mic2",[["path",{d:"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12",key:"zoua8r"}],["circle",{cx:"17",cy:"7",r:"5",key:"1fomce"}]]);function z(){const[c,v]=t.useState(""),[r,j]=t.useState("weekly"),[x,w]=t.useState(""),[u,y]=t.useState(""),[p,S]=t.useState(""),[h,g]=t.useState(!1),d=D(),k=async s=>{var n,f;if(s.preventDefault(),!c.trim()){l.error("Net name is required");return}g(!0);try{const{data:{user:a}}=await i.auth.getUser();if(!a){l.error("Not authenticated"),d("/login");return}const{data:F}=await i.from("profiles").select("id").eq("id",a.id).single();if(!F){const{error:N}=await i.from("profiles").insert({id:a.id,callsign:((n=a.user_metadata)==null?void 0:n.callsign)||"UNKNOWN",name:((f=a.user_metadata)==null?void 0:f.name)||null}).select("id").single();if(N){console.error("Profile creation error:",N),l.error("Profile sync failed. Please try logging out and back in.");return}}let o=x.trim();o&&!isNaN(Number(o))&&(o+=" MHz");const{data:C,error:b}=await i.from("nets").insert({user_id:a.id,name:c.trim(),type:r,frequency:o||null,mode:u.trim()||null,notes:p.trim()||null}).select().single();if(b){l.error("Failed to create net"),console.error(b);return}l.success("Net created successfully!"),d(`/nets/${C.id}`)}catch{l.error("An error occurred")}finally{g(!1)}};return e.jsxs("main",{className:"h-screen pt-16 md:pt-20 overflow-hidden flex flex-col bg-slate-950",children:[e.jsx("div",{className:"px-4 md:px-6 py-6 border-b border-white/5 bg-slate-950/50 backdrop-blur-md z-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col sm:flex-row items-center gap-6",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 shadow-lg shadow-emerald-500/10",children:e.jsx(m,{className:"w-8 h-8 text-emerald-400"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:"Initialize Operation"}),e.jsx("p",{className:"text-slate-500 text-xs font-mono mt-1 uppercase tracking-wider",children:"Configure New Net Control Session"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-8 flex justify-center",children:e.jsxs("form",{onSubmit:k,className:"card glass-card w-full max-w-3xl p-6 md:p-10 space-y-8 h-fit",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{htmlFor:"name",className:"block text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em]",children:["Operation Name ",e.jsx("span",{className:"text-emerald-500",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(m,{className:"h-5 w-5 text-slate-600 group-focus-within:text-emerald-400 transition-colors"})}),e.jsx("input",{id:"name",type:"text",value:c,onChange:s=>v(s.target.value),placeholder:"e.g., Weekly Ragchew Net",className:"input pl-11 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 focus:ring-emerald-500/10 text-lg font-bold",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em]",children:["Operation Type ",e.jsx("span",{className:"text-emerald-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"weekly",label:"Standard Net",desc:"REGULAR SCHEDULE",color:"emerald"},{value:"emergency_exercise",label:"Emergency",desc:"DRILLS / ACTUAL",color:"rose"},{value:"special",label:"Special Event",desc:"FIELD OPS",color:"violet"}].map(s=>e.jsxs("label",{className:`relative flex flex-col p-4 rounded-xl border-2 cursor-pointer transition-all hover:scale-[1.02] active:scale-[0.98] ${r===s.value?`border-${s.color}-500/50 bg-${s.color}-500/5 shadow-lg shadow-${s.color}-500/5`:"border-slate-800/50 bg-slate-900/30 hover:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"type",value:s.value,checked:r===s.value,onChange:n=>j(n.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`text-sm font-bold uppercase tracking-tight ${r===s.value?`text-${s.color}-400`:"text-slate-400"}`,children:s.label}),r===s.value&&e.jsx("span",{className:`flex h-1.5 w-1.5 rounded-full bg-${s.color}-500 shadow-[0_0_8px_currentColor]`})]}),e.jsx("span",{className:"text-[9px] text-slate-600 font-mono font-bold tracking-widest",children:s.desc})]},s.value))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"frequency",className:"block text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em]",children:"Frequency"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-slate-600 group-focus-within:text-emerald-400 transition-colors"})}),e.jsx("input",{id:"frequency",type:"text",value:x,onChange:s=>w(s.target.value),placeholder:"145.500",className:"input pl-11 pr-16 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 font-mono text-white"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-[10px] font-bold text-slate-700 group-focus-within:text-emerald-500/50 uppercase tracking-widest",children:"MHz"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"mode",className:"block text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em]",children:"Mode"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(q,{className:"h-5 w-5 text-slate-600 group-focus-within:text-emerald-400 transition-colors"})}),e.jsxs("select",{id:"mode",value:u,onChange:s=>y(s.target.value),className:"input pl-11 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 appearance-none text-white text-sm",children:[e.jsx("option",{value:"",className:"bg-slate-900",children:"Select mode..."}),e.jsx("option",{value:"FM",className:"bg-slate-900",children:"FM"}),e.jsx("option",{value:"SSB",className:"bg-slate-900",children:"SSB"}),e.jsx("option",{value:"AM",className:"bg-slate-900",children:"AM"}),e.jsx("option",{value:"CW",className:"bg-slate-900",children:"CW"}),e.jsx("option",{value:"Digital",className:"bg-slate-900",children:"Digital"}),e.jsx("option",{value:"FT8",className:"bg-slate-900",children:"FT8"}),e.jsx("option",{value:"DMR",className:"bg-slate-900",children:"DMR"}),e.jsx("option",{value:"D-STAR",className:"bg-slate-900",children:"D-STAR"}),e.jsx("option",{value:"YSF",className:"bg-slate-900",children:"YSF"}),e.jsx("option",{value:"NXDN",className:"bg-slate-900",children:"NXDN"}),e.jsx("option",{value:"P25",className:"bg-slate-900",children:"P25"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{htmlFor:"notes",className:"block text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em]",children:"Operational Notes"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute top-3 left-0 pl-4 flex items-start pointer-events-none",children:e.jsx(T,{className:"h-5 w-5 text-slate-600 group-focus-within:text-emerald-400 transition-colors"})}),e.jsx("textarea",{id:"notes",value:p,onChange:s=>S(s.target.value),placeholder:"Any additional notes about this operation...",rows:2,className:"input pl-11 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 resize-none text-sm"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-5 pt-8 border-t border-white/5",children:[e.jsx("button",{type:"button",onClick:()=>d(-1),className:"text-xs font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors px-4",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"h-12 px-8 rounded-xl bg-emerald-600 text-white font-bold text-sm hover:bg-emerald-500 transition-all shadow-lg shadow-emerald-500/20 flex items-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed group",children:h?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Initializing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),e.jsx("span",{children:"START OPERATION"})]})})]})]})})]})}export{z as default};
