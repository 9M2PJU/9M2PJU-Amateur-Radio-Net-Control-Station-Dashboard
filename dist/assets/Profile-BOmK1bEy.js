import{c as k,r as s,u as C,j as e,a as h,U as f,s as i,b as r}from"./index-C_TrKtcQ.js";import{M as P}from"./mail-Go-DWsgm.js";import{S as g}from"./shield-0UUCscYl.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=k("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function U(){const[n,j]=s.useState(null),[y,b]=s.useState(!0),[c,o]=s.useState(!1),[d,m]=s.useState(""),[p,x]=s.useState(""),[v,N]=s.useState(""),u=C();s.useEffect(()=>{(async()=>{const{data:{user:t}}=await i.auth.getUser();if(!t){u("/login");return}N(t.email||"");const{data:l,error:S}=await i.from("profiles").select("*").eq("id",t.id).single();S?r.error("Failed to load profile"):l&&(j(l),m(l.name||""),x(l.callsign||"")),b(!1)})()},[u]);const w=async a=>{if(a.preventDefault(),!!n){o(!0);try{const{error:t}=await i.from("profiles").update({name:d.trim(),callsign:p.trim().toUpperCase()}).eq("id",n.id);if(t)throw t;r.success("Profile updated successfully")}catch{r.error("Failed to update profile")}finally{o(!1)}}};return y?e.jsx("div",{className:"flex items-center justify-center h-[80vh]",children:e.jsx(h,{className:"w-8 h-8 text-emerald-500 animate-spin"})}):e.jsxs("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12 mt-20 md:mt-24 space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-slate-900/50 border border-slate-800 shadow-lg shadow-cyan-500/10",children:e.jsx(f,{className:"w-8 h-8 text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Operator Profile"}),e.jsx("p",{className:"text-slate-400",children:"Manage your station identity and credentials."})]})]}),e.jsx("div",{className:"card glass-card p-8",children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Email Address"}),e.jsxs("div",{className:"relative group opacity-75",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-5 w-5 text-slate-500"})}),e.jsx("input",{type:"email",value:v,disabled:!0,className:"input pl-11 w-full bg-slate-900/30 border-slate-800 text-slate-500 cursor-not-allowed"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx(g,{className:"h-4 w-4 text-emerald-500/50"})})]}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"}),"Verified secure identity"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"callsign",className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:["Callsign ",e.jsx("span",{className:"text-cyan-500",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(f,{className:"h-5 w-5 text-slate-500 group-focus-within:text-cyan-400 transition-colors"})}),e.jsx("input",{id:"callsign",type:"text",value:p,onChange:a=>x(a.target.value.toUpperCase()),className:"input pl-11 w-full bg-slate-900/50 border-slate-800 focus:border-cyan-500/50 font-mono tracking-wider",placeholder:"MY1CALL",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Operator Name"}),e.jsx("input",{id:"name",type:"text",value:d,onChange:a=>m(a.target.value),className:"input w-full bg-slate-900/50 border-slate-800 focus:border-cyan-500/50",placeholder:"John Doe"})]})]}),e.jsx("div",{className:"pt-6 border-t border-slate-800 flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"btn btn-primary bg-cyan-500 hover:bg-cyan-600 shadow-lg shadow-cyan-500/20 w-full sm:w-auto",children:c?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4"}),"Save Changes"]})})})]})})]})}export{U as default};
