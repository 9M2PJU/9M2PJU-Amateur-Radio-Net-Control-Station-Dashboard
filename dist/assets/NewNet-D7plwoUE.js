import{r as a,u as M,j as e,a as C,b as l,s as o}from"./index-C2FLPCcB.js";import{R as m}from"./radio-D4mfxgOj.js";import{S as q}from"./signal-BraX4bEM.js";import{M as D,F as R}from"./mic-2-LcxplYqh.js";function _(){const[c,v]=a.useState(""),[r,N]=a.useState("weekly"),[x,b]=a.useState(""),[u,j]=a.useState(""),[p,w]=a.useState(""),[h,g]=a.useState(!1),d=M(),y=async s=>{var n;if(s.preventDefault(),!c.trim()){l.error("Net name is required");return}g(!0);try{const{data:{user:t}}=await o.auth.getUser();if(!t){l.error("Not authenticated"),d("/login");return}const{data:S}=await o.from("profiles").select("id").eq("id",t.id).single();if(!S){const{error:k}=await o.from("profiles").insert({id:t.id,email:t.email,callsign:((n=t.user_metadata)==null?void 0:n.callsign)||"UNKNOWN"}).select("id").single();if(k){l.error("Profile not found");return}}let i=x.trim();i&&!isNaN(Number(i))&&(i+=" MHz");const{data:F,error:f}=await o.from("nets").insert({user_id:t.id,name:c.trim(),type:r,frequency:i||null,mode:u.trim()||null,notes:p.trim()||null}).select().single();if(f){l.error("Failed to create net"),console.error(f);return}l.success("Net created successfully!"),d(`/nets/${F.id}`)}catch{l.error("An error occurred")}finally{g(!1)}};return e.jsxs("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12 mt-20 md:mt-24 space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 rounded-2xl bg-slate-900/50 border border-slate-800 mb-6 shadow-lg shadow-emerald-500/10",children:e.jsx(m,{className:"w-8 h-8 text-emerald-400"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-white tracking-tight mb-2",children:"Initialize Operation"}),e.jsx("p",{className:"text-slate-400 max-w-lg mx-auto",children:"Configure a new net control session. All parameters can be adjusted during active operation."})]}),e.jsxs("form",{onSubmit:y,className:"card glass-card p-6 md:p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:["Operation Name ",e.jsx("span",{className:"text-emerald-500",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(m,{className:"h-5 w-5 text-slate-500 group-focus-within:text-emerald-400 transition-colors"})}),e.jsx("input",{id:"name",type:"text",value:c,onChange:s=>v(s.target.value),placeholder:"e.g., Weekly Ragchew Net",className:"input pl-11 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 focus:ring-emerald-500/10",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:["Operation Type ",e.jsx("span",{className:"text-emerald-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"weekly",label:"Standard Net",desc:"Regular schedule",color:"emerald"},{value:"emergency_exercise",label:"Emergency",desc:"Drills / Actual",color:"rose"},{value:"special",label:"Special Event",desc:"Contest / Field",color:"violet"}].map(s=>e.jsxs("label",{className:`relative flex flex-col p-4 rounded-xl border-2 cursor-pointer transition-all hover:scale-[1.02] active:scale-[0.98] ${r===s.value?`border-${s.color}-500 bg-${s.color}-500/10 shadow-lg shadow-${s.color}-500/10`:"border-slate-800 bg-slate-900/30 hover:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"type",value:s.value,checked:r===s.value,onChange:n=>N(n.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-bold ${r===s.value?`text-${s.color}-400`:"text-white"}`,children:s.label}),r===s.value&&e.jsx("span",{className:`flex h-2.5 w-2.5 rounded-full bg-${s.color}-500 shadow-[0_0_8px_currentColor]`})]}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:s.desc})]},s.value))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"frequency",className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Frequency"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(q,{className:"h-5 w-5 text-slate-500 group-focus-within:text-emerald-400 transition-colors"})}),e.jsx("input",{id:"frequency",type:"text",value:x,onChange:s=>b(s.target.value),placeholder:"145.500",className:"input pl-11 pr-16 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 font-mono"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-xs font-bold text-slate-500 group-focus-within:text-emerald-500/50 uppercase tracking-widest",children:"MHz"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"mode",className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Mode"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(D,{className:"h-5 w-5 text-slate-500 group-focus-within:text-emerald-400 transition-colors"})}),e.jsxs("select",{id:"mode",value:u,onChange:s=>j(s.target.value),className:"input pl-11 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 appearance-none",children:[e.jsx("option",{value:"",children:"Select mode..."}),e.jsx("option",{value:"FM",children:"FM"}),e.jsx("option",{value:"SSB",children:"SSB"}),e.jsx("option",{value:"AM",children:"AM"}),e.jsx("option",{value:"CW",children:"CW"}),e.jsx("option",{value:"Digital",children:"Digital"}),e.jsx("option",{value:"FT8",children:"FT8"}),e.jsx("option",{value:"DMR",children:"DMR"}),e.jsx("option",{value:"D-STAR",children:"D-STAR"}),e.jsx("option",{value:"YSF",children:"YSF"}),e.jsx("option",{value:"NXDN",children:"NXDN"}),e.jsx("option",{value:"P25",children:"P25"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none text-slate-500",children:e.jsx("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Operational Notes"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute top-3 left-0 pl-4 flex items-start pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-slate-500 group-focus-within:text-emerald-400 transition-colors"})}),e.jsx("textarea",{id:"notes",value:p,onChange:s=>w(s.target.value),placeholder:"Any additional notes about this operation...",rows:3,className:"input pl-11 w-full bg-slate-900/50 border-slate-800 focus:border-emerald-500/50 resize-none"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>d(-1),className:"btn btn-ghost text-slate-400 hover:text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"btn btn-primary min-w-[140px] shadow-lg shadow-emerald-500/20",children:h?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Initializing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Start Net"]})})]})]})]})}export{_ as default};
